# ==================== 目标平台配置 ====================
CONFIG_TARGET_rockchip=y
CONFIG_TARGET_rockchip_armv8=y
CONFIG_TARGET_rockchip_armv8_DEVICE_rockchip_rk35xx=y
CONFIG_TARGET_DEVICE_rockchip_rk35xx_DEVICE_nlnet_xgp=y

# ==================== 系统核心配置 ====================
CONFIG_TARGET_MULTI_PROFILE=y
CONFIG_TARGET_ALL_PROFILES=y
CONFIG_TARGET_OPTIMIZATION="-O2 -pipe -mcpu=cortex-a55"
CONFIG_TARGET_ROOTFS_PARTSIZE=512
CONFIG_TARGET_KERNEL_PARTSIZE=64

# ==================== 内存优化配置 ====================
CONFIG_KERNEL_KALLSYMS=n
CONFIG_KERNEL_DEBUG_INFO=n
CONFIG_KERNEL_DEBUG_KERNEL=n
CONFIG_KERNEL_SLAB=y
CONFIG_KERNEL_SLUB=y
CONFIG_KERNEL_SLUB_CPU_PARTIAL=y
CONFIG_KERNEL_SLUB_DEBUG=n

# ==================== 5G模块支持 ====================
CONFIG_PACKAGE_quectel-cm-5g=y
CONFIG_PACKAGE_quectel_Gobinet=y
CONFIG_PACKAGE_quectel_MHI=y
CONFIG_PACKAGE_quectel_QMI_WWAN=y
CONFIG_PACKAGE_modemmanager=y
CONFIG_PACKAGE_modemmanager-qt=y
CONFIG_PACKAGE_libqmi=y
CONFIG_PACKAGE_uqmi=y
CONFIG_PACKAGE_umbim=y

# ==================== 硬件驱动配置 ====================
# WiFi驱动 (MT7916/M7922)
CONFIG_PACKAGE_kmod-mt7915e=y
CONFIG_PACKAGE_kmod-mt7916-firmware=y
CONFIG_PACKAGE_kmod-mt7922-firmware=y

# 网络驱动
CONFIG_PACKAGE_kmod-phy-realtek=y
CONFIG_PACKAGE_kmod-r8169=y

# 存储驱动
CONFIG_PACKAGE_kmod-ata-ahci=y
CONFIG_PACKAGE_kmod-ata-core=y
CONFIG_PACKAGE_kmod-mmc=y
CONFIG_PACKAGE_kmod-sdhci=y

# USB驱动
CONFIG_PACKAGE_kmod-usb-core=y
CONFIG_PACKAGE_kmod-usb-ohci=y
CONFIG_PACKAGE_kmod-usb-uhci=y
CONFIG_PACKAGE_kmod-usb2=y
CONFIG_PACKAGE_kmod-usb3=y
CONFIG_PACKAGE_kmod-usb-storage=y
CONFIG_PACKAGE_kmod-usb-storage-uas=y

# PCIe驱动
CONFIG_PACKAGE_kmod-pcie=y
CONFIG_PACKAGE_kmod-pcie-rockchip=y

# 显示驱动
CONFIG_PACKAGE_kmod-drm=y
CONFIG_PACKAGE_kmod-drm-kms-helper=y
CONFIG_PACKAGE_kmod-drm-rockchip=y
CONFIG_PACKAGE_kmod-fb=y

# ==================== 新增硬件驱动 ====================
# SPI/I2C显示屏 (GC9307)
CONFIG_PACKAGE_kmod-spi-dev=y
CONFIG_PACKAGE_kmod-i2c-core=y
CONFIG_PACKAGE_kmod-i2c-algo-bit=y
CONFIG_PACKAGE_kmod-fb-gc9307=y

# PWM风扇控制
CONFIG_PACKAGE_kmod-pwm=y
CONFIG_PACKAGE_kmod-pwm-rockchip=y
CONFIG_PACKAGE_kmod-hwmon-core=y
CONFIG_PACKAGE_kmod-hwmon-rockchip=y

# LED指示灯
CONFIG_PACKAGE_kmod-leds-gpio=y
CONFIG_PACKAGE_kmod-ledtrig-default-on=y
CONFIG_PACKAGE_kmod-ledtrig-heartbeat=y

# 按钮支持
CONFIG_PACKAGE_kmod-input-core=y
CONFIG_PACKAGE_kmod-input-evdev=y
CONFIG_PACKAGE_kmod-gpio-button-hotplug=y

# ==================== 核心软件包 ====================
CONFIG_PACKAGE_dnsmasq-full=y
CONFIG_PACKAGE_firewall4=y
CONFIG_PACKAGE_iptables-nft=y
CONFIG_PACKAGE_iwinfo=y
CONFIG_PACKAGE_libiwinfo-lua=y

# LuCI界面
CONFIG_PACKAGE_luci=y
CONFIG_PACKAGE_luci-base=y
CONFIG_PACKAGE_luci-compat=y
CONFIG_PACKAGE_luci-mod-admin-full=y
CONFIG_PACKAGE_luci-theme-bootstrap=y

# 存储相关
CONFIG_PACKAGE_blkid=y
CONFIG_PACKAGE_blockdev=y
CONFIG_PACKAGE_e2fsprogs=y
CONFIG_PACKAGE_fdisk=y
CONFIG_PACKAGE_lsblk=y
CONFIG_PACKAGE_mount-utils=y
CONFIG_PACKAGE_parted=y

# 网络工具
CONFIG_PACKAGE_ip-full=y
CONFIG_PACKAGE_iperf3=y
CONFIG_PACKAGE_tcpdump=y
CONFIG_PACKAGE_curl=y
CONFIG_PACKAGE_wget-ssl=y

# ==================== 编译优化 ====================
CONFIG_CCACHE=y
CONFIG_BUILD_LOG=y
CONFIG_DEVEL=y
CONFIG_IB=y
CONFIG_IMAGEOPT=y
CONFIG_JSON_OVERVIEW=y
CONFIG_STRIP_KERNEL_EXPORTS=y

# ==================== 防止内存溢出设置 ====================
CONFIG_KERNEL_SLUB=y
CONFIG_KERNEL_SLUB_CPU_PARTIAL=y
CONFIG_KERNEL_SLUB_DEBUG=n
CONFIG_KERNEL_PROFILING=n
CONFIG_KERNEL_DEBUG_FS=n
CONFIG_KERNEL_PRINTK=n
CONFIG_KERNEL_BUG=n

# 关闭调试符号减少内存使用
CONFIG_DEBUG_INFO=n
CONFIG_DEBUG_KERNEL=n
CONFIG_GDB_SCRIPTS=n

# ==================== 文件系统支持 ====================
CONFIG_PACKAGE_kmod-fs-autofs4=y
CONFIG_PACKAGE_kmod-fs-btrfs=y
CONFIG_PACKAGE_kmod-fs-cifs=y
CONFIG_PACKAGE_kmod-fs-exfat=y
CONFIG_PACKAGE_kmod-fs-ext4=y
CONFIG_PACKAGE_kmod-fs-f2fs=y
CONFIG_PACKAGE_kmod-fs-ntfs3=y
CONFIG_PACKAGE_kmod-fs-vfat=y
CONFIG_PACKAGE_kmod-fuse=y

# ==================== 其他必要配置 ====================
CONFIG_PACKAGE_ca-bundle=y
CONFIG_PACKAGE_ca-certificates=y
CONFIG_PACKAGE_libstdcpp=y
CONFIG_PACKAGE_librt=y
CONFIG_PACKAGE_libpthread=y
CONFIG_PACKAGE_zlib=y

# iStoreOS特定配置
CONFIG_VERSION_DIST="iStoreOS"
CONFIG_VERSION_REPO="https://mirrors.cernet.edu.cn/openwrt/releases/24.10"
CONFIG_VERSION_CODE="iStoreOS-24.10"
